description = "Integration with WRO4J to perform runtime CoffeeScript compilation, JavaScript minimization, and more."

dependencies {
    compile project(":tapestry-core")
    compile "ro.isdc.wro4j:wro4j-extensions:${versions.wro4j}", {
        exclude group: "org.codehaus.gmaven.runtime", module: "gmaven-runtime-1.7"
        exclude group: "com.github.lltyk", module: "dojo-shrinksafe"
        exclude group: "org.springframework", module: "spring-web"
        exclude group: "me.n4u.sass", module: "sass-gems"
        exclude group: "nz.co.edmi", module: "bourbon-gem-jar"
        exclude group: "org.webjars", module: "jshint"
        exclude group: "org.webjars", module: "less"
        exclude group: "org.webjars", module: "emberjs"
        exclude group: "org.webjars", module: "handlebars"
        exclude group: "org.webjars", module: "jslint"
        exclude group: "org.webjars", module: "json2"
        // Due to conflict:
        exclude group: "org.slf4j", module: "slf4j-api"
    }

    testCompile project(":tapestry-runner")
    testCompile "org.gebish:geb-spock:${versions.geb}"
    testCompile "org.spockframework:spock-core:${versions.spock}"

    testCompile "org.seleniumhq.selenium:selenium-java:${versions.selenium}", {
        exclude group: "org.eclipse.jetty"
    }
    testCompile "org.seleniumhq.selenium:selenium-server:${versions.selenium}", {
        exclude group: "org.eclipse.jetty"
    }
}

jar.manifest {
    attributes 'Tapestry-Module-Classes': 'org.apache.tapestry5.wro4j.modules.WRO4JModule'
}


test {
    useJUnit()

    systemProperties "geb.build.reportsDir": "$reportsDir/geb"
}